let Mark,updateSubject,readSubjectById;_ac8‍.x([["createMark",()=>createMark],["createMarkAPI",()=>createMarkAPI]]);_ac8‍.w("../../class/mark",[["Mark",["Mark"],function(v){Mark=v}]]);_ac8‍.w("../subject/updateSubject",[["updateSubject",["updateSubject"],function(v){updateSubject=v}]]);_ac8‍.w("../subject/readSubject",[["readSubjectById",["readSubjectById"],function(v){readSubjectById=v}]]);



       const createMark = async (markData) => {
	try {
		const newMark = await new Mark(markData).save();
		const subject = await readSubjectById(markData.subjectId);
		const subjectMarks = subject.marks;
		subjectMarks.push(newMark);
		const newSubject = updateSubject(markData.subjectId, {
			...subject,
			marks: subjectMarks,
		});
		return newSubject;
	} catch (e) {
		throw new Error('Não foi possível criar nota');
	}
};

       const createMarkAPI = async (req, res) => {
	const { subjectId, value, weight, title, description } = req.body;

	const data = { subjectId, value, weight, title, description };

	const created = await createMark(data);
	res.status(201).json(created);
};
